{% extends "base.html" %}
{% load tag %}

{% block content %}
<a href="" class="btn btn-success" role="btn">{{exam.title}}</a>
<section class="wrapper">
  <ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active"><a aria-control="tab2" data-toggle="tab" role="tab"  href="#tab2">選擇題</a></li>
    <li role="presentation"><a aria-control="tab3" data-toggle="tab" role="tab"  href="#tab3">匯入選擇題</a></li>
  </ul>
  <section class="tab-content">
    <!--------------------------------------------------------->
    <article id="tab2" class="tab-pane fade in active" role="tabpanel">
      <form action="" method="post" enctype="multipart/form-data" class="form-horizontal">
        {% csrf_token %}
        <input type=hidden name=types value="2">
        <input type=hidden name=exam_id value={{exam.id}}>
        <div class="form-group">
          <label for="id_title" class="col-sm-2 control-label">題目</label>
          <div class="col-sm-10">
            <textarea name="title" id="id_title" rows="10" class="form-control"></textarea>
          </div>
        </div>
        <div class="form-group">
          <label for="id_option1" class="col-sm-2 control-label">選項1</label>
          <div class="col-sm-10">
            <input id="id_option1" maxlength="250" name="option1" type="text" class="form-control" />
          </div>
        </div>
        <div class="form-group">
          <label for="id_option2" class="col-sm-2 control-label">選項2</label>
          <div class="col-sm-10">
            <input id="id_option2" maxlength="250" name="option2" type="text" class="form-control" />
          </div>
        </div>
        <div class="form-group">
          <label for="id_option3" class="col-sm-2 control-label">選項3</label>
          <div class="col-sm-10">
            <input id="id_option3" maxlength="250" name="option3" type="text" class="form-control" />
          </div>
        </div>
        <div class="form-group">
          <label for="id_option4" class="col-sm-2 control-label">選項4</label>
          <div class="col-sm-10">
            <input id="id_option4" maxlength="250" name="option4" type="text" class="form-control" />
          </div>
        </div>
        <div class="form-group">
          <label for="id_answer" class="col-sm-2 control-label">答案</label>
          <div class="col-sm-10">
            <select id="id_answer" name="answer" class="form-control" title="Choose one of the following...">
              <option selected disabled value=0>請選擇</option>
              <option value=1>選項1</option>
              <option value=2>選項2</option>
              <option value=3>選項3</option>
              <option value=4>選項4</option>	 
            </select>
          </div>
        </div>
        <div class="form-group">
          <label for="id_score" class="col-sm-2 control-label">配分</label>
          <div class="col-sm-10">
            <input id="id_score" maxlength="250" name="score" type="number" class="form-control" />
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-offset-2 col-sm-10">
            <input type="submit" class="btn btn-default" value="送出" />
          </div>
        </div>
      </form>
    </article>
    <!--------------------------------------------------------->
    <article id="tab3" class="tab-pane fade" role="tabpanel">
      {% if form.errors %}
      <p style="color: red;">
        Please correct the error{{ form.errors|pluralize }} below.
      </p>
      {% endif %}
      <p>
        <a href="/static/files/exam.xlsx" class="btn btn-primary" role="btn">選擇題格式範本.xlsx</a>
      </p>
      <form action="/teacher/exam/import2/upload/{{exam.id}}/" enctype="multipart/form-data" method="post" class="form-inline">
        {% csrf_token %}
        <input id="id_file" name="file" type="file" class="form-control" />
        <input type="submit" class="btn btn-default" value="上傳" />
      </form>
    </article>
    <!--------------------------------------------------------->
    <article id="tab1" class="tab-pane fade" role="tabpanel">
      <form action="" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type=hidden name=types value="1">
        <input type=hidden name=exam_id value={{exam.id}}>
        <div class="form-control">
          <label for="title">問題</label>
          <textarea name="title" id="title" rows="10" class="form-control"></textarea>
        </div>
        <div class="form-group">
          <label for="radioBtn">答案</label>
          <div id="radioBtn" class="btn-group">
            <a class="btn btn-primary btn-sm active" data-toggle="happy" data-title="Y">是</a>
            <a class="btn btn-primary btn-sm notActive" data-toggle="happy" data-title="N">否</a>
          </div>
        </div>
        <input type="hidden" name="happy" id="happy" />
        <input type="submit" class="btn btn-default" value="送出" />
      </form>
    </article>
    <!--------------------------------------------------------->
  </section>
</section>
{% endblock %}

{% block domready %}
  $("#title").focus();
  $('#radioBtn a').on('click', function(){
    var sel = $(this).data('title');
    var tog = $(this).data('toggle');
    $('#'+tog).prop('value', sel);

    $('a[data-toggle="'+tog+'"]').not('[data-title="'+sel+'"]').removeClass('active').addClass('notActive');
    $('a[data-toggle="'+tog+'"][data-title="'+sel+'"]').removeClass('notActive').addClass('active');
  });
  $('body').css('background-image','url(/static/images/back1.gif)');
{% endblock %}